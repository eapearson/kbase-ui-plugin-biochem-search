(this["webpackJsonpkbase-ui-plugin-biochem-search"]=this["webpackJsonpkbase-ui-plugin-biochem-search"]||[]).push([[0],{135:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(15),s=a.n(l),c=(a(59),a(6)),i=a(5),o=a(8),u=a(7),m=a(9),d=(a(60),a(61),function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"onClick",value:function(){var e=this.props,t=e.label,a=e.onClick;a(t)}},{key:"render",value:function(){var e=this.props,t=e.activeTab,a=e.label,n="tab-list-item";return t===a&&(n+=" tab-list-active"),r.a.createElement("li",{className:n,onClick:this.onClick.bind(this)},a)}}]),t}(n.Component)),h=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={activeTab:"Compounds"},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"onClickTabItem",value:function(e){this.setState({activeTab:e})}},{key:"componentDidMount",value:function(){var e=r.a.Children.toArray(this.props.children);e.length&&this.setState({activeTab:e[0].props.label})}},{key:"renderTabs",value:function(){var e=this;return r.a.createElement("div",{className:"tabs"},r.a.createElement("ol",{className:"tab-list"},r.a.Children.map(this.props.children,(function(t){var a=t.props.label;return r.a.createElement(d,{activeTab:e.state.activeTab,key:a,label:a,onClick:e.onClickTabItem.bind(e)})}))),r.a.createElement("div",{className:"tab-content"},r.a.Children.map(this.props.children,(function(t){if(t.props.label===e.state.activeTab)return t.props.children}))))}},{key:"render",value:function(){if(this.props.children)return this.renderTabs()}}]),t}(n.Component),E=a(51),p=a.n(E),b=a(52),g=a.n(b),v=a(53),f=a.n(v),S=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={tableData:[],search_text:"",message:"",searchState:"SEARCH_STATE_NONE",error:""},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"handleChange",value:function(e){this.setState({search_text:e.target.value})}},{key:"handleKeyPress",value:function(e){13!==e.keyCode&&13!==e.which||this.doSearch()}},{key:"handleSearchButtonClick",value:function(){this.doSearch()}},{key:"loadAll",value:function(){}},{key:"doSearch",value:function(){var e=this;this.setState({searchState:"SEARCH_STATE_SEARCHING"}),this.state.search_text?f.a.post(this.props.relationEngineURL,{search_text:this.state.search_text,all_documents:!1,offset:0,result_limit:9999999,include_obsolete:!0}).then((function(t){e.setState({tableData:t.data.results,message:"".concat(t.data.results.length.toLocaleString()," items found"),searchState:"SEARCH_STATE_SUCCESS"})})).catch((function(t){e.setState({searchState:"SEARCH_STATE_ERROR",error:t.message,message:t.message})})):this.setState({searchState:"SEARCH_STATE_NONE"})}},{key:"componentDidMount",value:function(){this.loadAll()}},{key:"renderNoData",value:function(){switch(this.state.searchState){case"SEARCH_STATE_NONE":return r.a.createElement("div",{className:"well"},"Please search for ",this.props.title," above");case"SEARCH_STATE_SEARCHING":return r.a.createElement("div",{className:"well"},"Searching... ",r.a.createElement("span",{class:"fa fa-spinner fa-spin"}));case"SEARCH_STATE_SUCCESS":return r.a.createElement("div",{className:"well"},"NO DATA FOUND by the search ",r.a.createElement("i",null,this.state.search_text));case"SEARCH_STATE_ERROR":return r.a.createElement("div",{className:"well"},"Error fetching ",this.props.title,": ",r.a.createElement("span",{class:"text-danger"},this.state.error))}}},{key:"handleTableChange",value:function(){console.log("table changed...")}},{key:"renderMessage",value:function(){switch(this.state.searchState){case"SEARCH_STATE_NONE":return"Please enter one or more search terms";case"SEARCH_STATE_SEARCHING":return'Searching... <span class="fa fa-spinner fa-spin"';case"SEARCH_STATE_SUCCESS":return"".concat(this.state.searchData.length.toLocaleString()," items found");case"SEARCH_STATE_ERROR":return r.a.createElement("span",{class:"text-danger"},"Error: ",this.state.error)}}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col mb-3 input-group form-inline justify-content-end"},r.a.createElement("input",{className:"form-control",type:"text",placeholder:"Search...",value:this.state.search_text,onChange:this.handleChange.bind(this),onKeyPress:this.handleKeyPress.bind(this)}),r.a.createElement("div",{className:"input-group-append",onClick:this.handleSearchButtonClick.bind(this)},r.a.createElement("button",{className:"input-group-text"},r.a.createElement("i",{className:"fa fa-search"})))),r.a.createElement("div",{className:"col"},this.renderMessage())),r.a.createElement(p.a,{keyField:"id",headerClasses:"table-header",data:this.state.tableData,columns:this.props.columns,pagination:g()(),expandRow:this.props.expandRow,noDataIndication:this.renderNoData(),handleTableChange:this.handleTableChange}))}}]),t}(n.Component),C=function(e){return"http://minedatabase.mcs.anl.gov/compound_images/ModelSEED/".concat(e,".png")},y="https://raw.githubusercontent.com/ModelSEED/ModelSEEDDatabase/dev/Biochemistry",_="https://ci.kbase.us/services/relation_engine_api/api/v1/query_results",k=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).expandRow={renderer:function(e){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-4"},r.a.createElement("img",{src:C(e.id),alt:"",onError:function(e){return e.target.src=""},className:"compound-detail-image"})),r.a.createElement("div",{className:"col-sm-8"},r.a.createElement("ul",{style:{listStyleType:"none"}},r.a.createElement("li",null,r.a.createElement("strong",null,"Abbreviation:")," ",e.abbreviation),r.a.createElement("li",null,r.a.createElement("strong",null,"DeltaG:")," ",e.deltag),r.a.createElement("li",null,r.a.createElement("strong",null,"DeltaG Error:")," ",e.deltagerr),r.a.createElement("li",null,r.a.createElement("strong",null,"pKa:")," ",e.pka),r.a.createElement("li",null,r.a.createElement("strong",null,"pKb:")," ",e.pkb),r.a.createElement("li",null,r.a.createElement("strong",null,"InChIKey:")," ",e.inchikey),r.a.createElement("li",null,r.a.createElement("strong",null,"SMILES:")," ",e.smiles),r.a.createElement("li",null,r.a.createElement("strong",null,"Is Core:")," ",e.is_core),r.a.createElement("li",null,r.a.createElement("strong",null,"Is Cofactor:")," ",e.is_cofactor),r.a.createElement("li",null,r.a.createElement("strong",null,"Is Obsolete:")," ",e.is_obsolete),r.a.createElement("li",null,r.a.createElement("strong",null,"Source:")," ",e.source))))},showExpandColumn:!0,onlyOneExpanding:!0,expanded:[]},a.state={table_items:[],search_text:"",message:"",columns:[{dataField:"_key",text:"ID",sort:!0},{dataField:"id",text:"Image",formatter:t.imgFormatter},{dataField:"name",text:"Name",sort:!0},{dataField:"formula",text:"Formula",sort:!0},{dataField:"mass",text:"Mass",sort:!0},{dataField:"charge",text:"Charge",sort:!0},{dataField:"aliases",text:"Aliases",formatter:t.aliasFormatter}]},a}return Object(m.a)(t,e),Object(i.a)(t,null,[{key:"imgFormatter",value:function(e){return r.a.createElement("img",{src:C(e),alt:"",style:{height:"100px"},onError:function(e){return e.target.src=""}})}},{key:"aliasFormatter",value:function(e){return r.a.createElement("span",null,String(e).replace(/\|/g,", ").replace(/;/g,"\n"))}}]),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(S,{columns:this.state.columns,expandRow:this.expandRow,githubURL:"".concat(y,"/compounds.json"),relationEngineURL:"".concat(_,"/?view=search_compounds&batch_size=9999999"),title:"Compounds"})}}]),t}(n.Component),x=a(23),N=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).expandRow={renderer:function(e){return r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},a.reactionImage(e)),r.a.createElement("div",{className:"col-sm"},r.a.createElement("ul",{style:{listStyleType:"none"}},r.a.createElement("li",null,r.a.createElement("strong",null,"Abbreviation:")," ",e.abbreviation),r.a.createElement("li",null,r.a.createElement("strong",null,"Reaction definition:")," ",e.definition),r.a.createElement("li",null,r.a.createElement("strong",null,"DeltaG:")," ",e.deltag),r.a.createElement("li",null,r.a.createElement("strong",null,"DeltaG Error:")," ",e.deltagerr),r.a.createElement("li",null,r.a.createElement("strong",null,"Direction:")," ",e.direction),r.a.createElement("li",null,r.a.createElement("strong",null,"Reversibility:")," ",e.reversibility),r.a.createElement("li",null,r.a.createElement("strong",null,"Is Transport:")," ",e.is_transport),r.a.createElement("li",null,r.a.createElement("strong",null,"Is Obsolete:")," ",e.is_obsolete),r.a.createElement("li",null,r.a.createElement("strong",null,"Source:")," ",e.source))))},showExpandColumn:!0,onlyOneExpanding:!0,expanded:[]},a.state={table_items:[],search_text:"",columns:[{dataField:"id",text:"ID",sort:!0},{dataField:"name",text:"Name",sort:!0},{dataField:"equation",text:"Equation"},{dataField:"deltag",text:"deltaG",sort:!0},{dataField:"status",text:"Status",sort:!0},{dataField:"aliases",text:"Aliases",formatter:a.aliasFormatter}]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(S,{columns:this.state.columns,expandRow:this.expandRow,githubURL:"".concat(y,"/reactions.json"),relationEngineURL:"".concat(_,"/?stored_query=search_reactions"),title:"Reactions"})}}],[{key:"aliasFormatter",value:function(e){return r.a.createElement("span",null,String(e).replace(/\|/g,", ").replace(/;/g,"\n"))}},{key:"renderCompound",value:function(e){var t=/(\([0-9.]+\)) (\w+)/.exec(e),a=Object(x.a)(t,3),n=a[1],l=a[2];return r.a.createElement(r.a.Fragment,{key:e},r.a.createElement("div",{className:"col-md-auto p-0"},n),r.a.createElement("div",{className:"col-md-auto"},r.a.createElement("img",{src:C(l),alt:"",style:{height:"110px"},onError:function(e){return e.target.src=""}})))}},{key:"renderHalfRxn",value:function(e){var t=this;return e.split("+").map((function(e){return t.renderCompound(e)})).reduce((function(e,t){return[e,r.a.createElement("h4",{key:t,className:"col-md-auto"}," ","+"," "),t]}))}},{key:"reactionImage",value:function(e){var t=e.code.split(" <=> "),a=Object(x.a)(t,2),n=a[0],l=a[1],s="\u2194";return">"===e.direction?s="\u2192":"<"===e.direction&&(s="\u2190"),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row align-items-center"},this.renderHalfRxn(n),r.a.createElement("h4",{className:"col-md-auto"},s)),r.a.createElement("div",{className:"row align-items-center"},this.renderHalfRxn(l)))}}]),t}(n.Component),O=function(e){function t(){return Object(c.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"container m-3 p-0","data-k-b-testhook-plugin":"biochem-search"},r.a.createElement(h,null,r.a.createElement("div",{label:"Compounds"},r.a.createElement(k,null)),r.a.createElement("div",{label:"Reactions"},r.a.createElement(N,null))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},54:function(e,t,a){e.exports=a(135)},59:function(e,t,a){}},[[54,1,2]]]);
//# sourceMappingURL=main.d763b669.chunk.js.map